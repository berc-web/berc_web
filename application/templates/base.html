{% extends 'layout.html' %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
{% endblock %}
{% block body %}
<div class="container base">
  <div class="row">
    <div class="col-md-12">
      {% block flash_messages %}
        {%- with messages = get_flashed_messages(with_categories=true) -%}
          {% if messages %}
            {% for category, message in messages %}
              {% if category=='error' %}
                {% set category='danger' %}
              {% endif %}
              <div class="alert alert-{{category}}">{{ message }}</div>
            {% endfor %}
          {% endif %}
        {%- endwith %}
      {% endblock %}
    </div>
  </div>
  <div class="row">
    <div class="col-md-3 col-md-offset-1 navigation">
      <ul class="nav nav-pills nav-stacked">
        {% if current_user.is_authenticated() %}
          <li class="user-name"><center>{{ current_user.username }}</center></li>
          <br>
          <li><a href="{{ url_for('user') }}">Profile</a></li>
          <li><a href="{{ url_for('upload_avatar') }}">Upload Avatar</a></li>
          <li><a href="{{ url_for('user.change_password') }}">Change Password</a></li>
          <li><a href="{{ url_for('user.change_username') }}">Change username</a></li>
        {% else %}
          <li><a href="{{ url_for('user.register') }}">Register</a></li>
          <li><a href="{{ url_for('user.login') }}">Sign in</a></li>
          <li><a href="{{ url_for('user.forgot_password') }}">Forgot password?</a></li>
        {% endif %}
      </ul>
    </div>
    <div class="col-md-offset-1 col-md-5 main">
      {% block content %}
      {% endblock %}
    </div>
  </div>
</div>
{% endblock %}

